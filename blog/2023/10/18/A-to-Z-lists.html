<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <link  rel="alternate" type="text/markdown" href="A-to-Z-lists.md" title=""/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/site.css" />
  <meta name="generator" content="antenna/0.0.6">
  <meta name="date" content="2025-09-15T15:57:00-07:00">
</head>
<body>
  <header>
    (date: 2025-09-15 15:57:00)
  </header>
  <nav>
    <ul>
    <li><a href="/" title="R. S. Doiel"><img class="blog-logo" src="/media/Wee-Free-Doiels-Summer-Reading.svg" alt="Wee Free Doiels, Summer Reading"></a></li>
    <li><a href="/">R. S. Doiel</a></li>
    <li><a href="/about.html">About</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/presentations.html">Presentations</a></li>
    <li><a href="/series/">Series</a></li>
    <li><a href="/search.html">Search</a></li>
    <li><a href="https://github.com/rsdoiel">GitHub</a></li>
    <li><a href="/index.xml" title="RSS, recent posts">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9"></path>
    <path d="M4 4a16 16 0 0 1 16 16"></path>
    <circle cx="5" cy="19" r="1"></circle> </svg> RSS </a></li>
    </ul>
  </nav>

  <section>
    <article data-published="2023-10-18" data-link="https://rsdoiel.github.io/blog/2023/10/18/A-to-Z-lists.html">
      <h1 id="building-a-to-z-lists-pages-in-pandoc">Building A to Z lists pages in Pandoc</h1>
      <p>By R. S. Doiel, 2023-10-18</p>
      <p>Pandoc offers a very good template system. It avoids elaborate features in favor of a few simple ways to bring content into the page.  It knows how to use data specified in “front matter” (a YAML header to a Markdown document) as well as how to merge in JSON or YAML from a metadata file.  One use case that is common in libraries and archives that less obvious of how to handle is building A to Z lists or year/date oriented listings where you have a set of navigation links at the top of the page followed by a set of H2 headers with UL lists between them.  In JSON the typical data presentation would look something like</p>
      <pre><code class="language-json">{
        &quot;a_to_z&quot;: [ &quot;A&quot;, &quot;B&quot;],
        &quot;content&quot;: {
          &quot;A&quot;: [
            &quot;After a beautiful day&quot;,
            &quot;Afterlife&quot;
          ],
          &quot;B&quot;: [
            &quot;Better day after&quot;,
            &quot;Better Life&quot;
          ]
        }
      }
      </code></pre>
      <p>The trouble is that while YAML’s outer dictionary (key/value map) works fine in Pandoc templates there is no way for the the for loop to handle maps of maps like we have above.  Pandoc templates really want to iterate over arrays of objects . That’s nice thing! It gives us more ways to transform the data to provide more flexibility in our template implementation. Here’s how I would restructure the previous JSON to make it easy to process via Pandoc’s template engine.  Note how I’ve taken our simple array of letters and turned them into an object with an “href” and “label” attribute. Similarly I’ve enhanced the “content” objects.</p>
      <pre><code class="language-json">{
        &quot;a_to_z&quot;: [ {&quot;href&quot;: &quot;A&quot;, &quot;label&quot;: &quot;A&quot;}, {&quot;href&quot;: &quot;B&quot;, &quot;label&quot;: &quot;B&quot;} ],
        &quot;content&quot;: [
            {&quot;letter&quot;: &quot;A&quot;, &quot;title&quot;: &quot;After a beautiful day&quot;, &quot;id&quot;: &quot;after-a-beautiful-day&quot;},
            {&quot;title&quot;: &quot;Afterlife&quot;, &quot;id&quot;: &quot;afterlife&quot;},
            {&quot;letter&quot;: &quot;B&quot;, &quot;title&quot;: &quot;Better day after&quot;, &quot;id&quot;: &quot;better-day-after&quot;},
            {&quot;title&quot;: &quot;Better Life&quot;, &quot;id&quot;: &quot;better-life&quot;}
        ]
      }
      </code></pre>
      <p>Then the template can be structure something like</p>
      <pre><code>&lt;menu&gt;
      ${for(a_to_z)}
      ${if(it.href)}&lt;li&gt;&lt;a href=&quot;${it.href}&quot;&gt;${it.label}&lt;/a&gt;&lt;/li&gt;${endif}
      ${endfor}
      &lt;/menu&gt;
      
      ${for(content)}
      ${if(it.letter)}
      
      ## &lt;a id=&quot;${it.letter}&quot; name=&quot;${it.letter}&quot;&gt;${it.letter}&lt;/a&gt;
      
      ${endif}
      - [${it.name}](${it.id})
      ${endfor}
      
      </code></pre>
      <p>There is one gotcha in A to Z list generation. A YAML parser may convert a bare “N” to “false” (and presumable “Y” will become “true”). This is really annoying. The way to avoid this is to add a space to the letter in your JSON output. This will insure that the “N” or “Y” aren’t converted to the boolean values “true” and “false”. Pandoc’s template engine is smart enough to trim leading and trailing spaces.</p>
      <p>Finally this technique can be used to produce lists and navigation that are based around years, months, or other iterative types but that is left as an exercise to the reader.</p>
      
    </article>
  </section>
  <footer>
    <p>copyright © 2016 - 2025 R. S. Doiel<br /> <a
    href="/rssfeed.html">RSS</a> feeds and website built with <a
    href="https://rsdoiel.github.io/antennaApp">antennaApp</a>, Bash, Make and <a
    href="https://pandoc.org">Pandoc</a>.</p>
  </footer>

    <script type="module" src="/modules/copyToClipboard.js"></script>
    <script type="module">
      await import('/pagefind/pagefind-highlight.js');
      new PagefindHighlight({ highlightParam: "highlight" });
    </script>
</body>
</html>
