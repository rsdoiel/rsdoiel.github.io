<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <link  rel="alternate" type="text/markdown" href="transpiling_with_deno.md" title=""/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/site.css" />
  <meta name="generator" content="antenna/0.0.6">
  <meta name="date" content="2025-09-15T14:06:32-07:00">
</head>
<body>
  <header>
    (date: 2025-09-15 14:06:32)
  </header>
  <nav>
    <ul>
    <li><a href="/" title="R. S. Doiel"><img class="blog-logo" src="/media/Wee-Free-Doiels-Summer-Reading.svg" alt="Wee Free Doiels, Summer Reading"></a></li>
    <li><a href="/">R. S. Doiel</a></li>
    <li><a href="/about.html">About</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/presentations.html">Presentations</a></li>
    <li><a href="/series/">Series</a></li>
    <li><a href="/search.html">Search</a></li>
    <li><a href="https://github.com/rsdoiel">GitHub</a></li>
    <li><a href="/index.xml" title="RSS, recent posts">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9"></path>
    <path d="M4 4a16 16 0 0 1 16 16"></path>
    <circle cx="5" cy="19" r="1"></circle> </svg> RSS </a></li>
    </ul>
  </nav>

  <section>
    <article data-published="2024-07-03" data-link="https://rsdoiel.github.io/blog/2024/07/03/transpiling_with_deno.html">
      <h1 id="transpiling-with-deno">Transpiling with Deno</h1>
      <p><a href="https://deno.land">Deno</a> is a fun environment to work in for learning TypeScript.  As I have become comfortable writing server side TypeScript code I know I want to also be able to use some modules in JavaScript form browser side. The question is then how to you go from TypeScript to JavaScript easily with getting involved with a bunch-o-npm packages?  Turns the solution in deno is to use the <a href="https://github.com/denoland/deno_emit/blob/main/js/README.md">deno_emit</a> module.  Let's say I have a TypeScript module called <code>hithere.ts</code>. I want to make it available as JavaScript so I can run it in a web browser. How do I use the <code>deno_emit</code> module to accomplish that?</p>
      <ul>
      <li>Write a short TypeScript program
      <ul>
      <li>include the transpiler module provided with emit</li>
      <li>use the transpiler to generate the JavaScript code</li>
      <li>output the JavaScript code</li>
      </ul>
      </li>
      </ul>
      <p>Here's what <code>transpile.ts</code> might look like:</p>
      <pre><code class="language-typescript">/* Get the transpiler module from deno's emit */
      import { transpile } from &quot;https://deno.land/x/emit/mod.ts&quot;;
      
      /* Get the python to my CL.ts as a URL */
      const url = new URL(&quot;./hithere.ts&quot;, import.meta.url);
      /* Transpile the code returning a result */
      const result = await transpile(url);
      
      /* Get the resulting code and write it to standard out */
      const code = result.get(url.href);
      console.log(code);
      </code></pre>
      <p>Here's the <code>hithere.ts</code> module:</p>
      <pre><code class="language-typescript">/**
       * hithere takes a name and returns a string of &quot;hi there &quot;, a name and &quot;!&quot;. If the name is null
       * it returns &quot;Hello World!&quot;.
       *
       * @param {string | null} name
       * @returns {string}
       */
      function hithere(name: string | null): string {
      	if (name === null) {
      		return &quot;Hello World!&quot;;
      	}
      	return `hi there ${name}!`;
      }
      </code></pre>
      <p>To compile the module I need to give transpile.ts some permissions.</p>
      <ul>
      <li>--allow-read (so I can read my local module</li>
      <li>--allow-env (the transpiler needs the environment)</li>
      <li>--allow-net (the deno emit module is not hosted locally)</li>
      </ul>
      <p>The command line could look like this.</p>
      <pre><code class="language-shell">deno run --allow-read --allow-env --allow-net \
        transpile.ts
      </code></pre>
      <p>The result is JavaScript. It still has my comments in the code but doesn't have the TypeScript specific<br />
      annotations.</p>
      <pre><code class="language-javascript">/**
       * hithere takes a name and returns a string of &quot;hi there &quot;, a name and &quot;!&quot;. If the name is null
       * it returns &quot;Hello World!&quot;.
       *
       * @param {string | null} name
       * @returns {string}
       */ function hithere(name) {
        if (name === null) {
          return &quot;Hello World!&quot;;
        }
        return `hi there ${name}!`;
      }
      </code></pre>
      
    </article>
  </section>
  <footer>
    <p>copyright Â© 2016 - 2025 R. S. Doiel<br /> <a
    href="/rssfeed.html">RSS</a> feeds and website built with <a
    href="https://rsdoiel.github.io/pttk">pttk</a>, Bash, Make and <a
    href="https://pandoc.org">Pandoc</a>.</p>
  </footer>

    <script type="module" src="/modules/copyToClipboard.js"></script>
    <script type="module">
      await import('/pagefind/pagefind-highlight.js');
      new PagefindHighlight({ highlightParam: "highlight" });
    </script>
</body>
</html>
