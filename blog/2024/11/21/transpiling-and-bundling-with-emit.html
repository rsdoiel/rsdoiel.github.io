<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <link  rel="alternate" type="text/markdown" href="transpiling-and-bundling-with-emit.md" title=""/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/site.css" />
  <meta name="generator" content="antenna/0.0.9">
  <meta name="date" content="2025-10-01T10:52:08-07:00">
</head>
<body>
  <nav>
    <ul>
    <li><a href="/" title="R. S. Doiel"><img class="blog-logo" src="/media/Wee-Free-Doiels-Summer-Reading.svg" alt="Wee Free Doiels, Summer Reading"></a></li>
    <li><a href="/">R. S. Doiel</a></li>
    <li><a href="/about.html">About</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/presentations.html">Presentations</a></li>
    <li><a href="/series/">Series</a></li>
    <li><a href="/search.html">Search</a></li>
    <li><a href="https://github.com/rsdoiel">GitHub</a></li>
    <li><a href="/index.xml" title="RSS, recent posts">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9"></path>
    <path d="M4 4a16 16 0 0 1 16 16"></path>
    <circle cx="5" cy="19" r="1"></circle> </svg> RSS </a></li>
    </ul>
  </nav>

  <section>
    <article data-published="2024-11-21" data-link="https://rsdoiel.github.io/blog/2024/11/21/transpiling-and-bundling-with-emit.html">
      <h1 id="transpiling--bundling-with-emit">Transpiling &amp; Bundling with Emit</h1>
      <p>One of the nice features of Deno is native TypeScript support.  One of the selling strength though is that the same source can run both server side and browser side.  The challenge is that TypeScript does not have native TypeScript support. This is easy to remedy using Deno's <a href="https://jsr.io/@deno/emit">emit</a> module.</p>
      <p>The emit module supports to important functions, <code>transpile</code> and <code>bundle</code>. Both will render your TypeScript as JavaScript in a browser friendly manner. The <code>transpile</code> function turns a single TypeScript file into an equivalent JavaScript file. Bundle can do that with a TypeScript and all the files it imports so you have a self contained JavaScript file with everything you need.</p>
      <!-- raw HTML omitted -->
      <p>Here's what my <code>transpile.ts</code> looks like.</p>
      <pre><code class="language-typescript">import { transpile } from &quot;jsr:@deno/emit&quot;;
      import * as path from &quot;jsr:@std/path&quot;;
      
      /* Transpile directory_client.ts to JavaScript and render it to 
         htdocs/js/directory_client.js */
      const js_path = path.join(&quot;htdocs&quot;, &quot;js&quot;);
      const js_name = path.join(js_path, &quot;directory_client.js&quot;);
      const url = new URL(&quot;./directory_client.ts&quot;, import.meta.url);
      const result = await transpile(url);
      const code = await result.get(url.href);
      
      await Deno.mkdir(js_path, { mode: 0o775, recursive: true });
      Deno.writeTextFile(js_name, code);
      </code></pre>
      <p>You can run that with the following long command line.</p>
      <pre><code class="language-shell">deno run --allow-import --allow-env --allow-read --allow-write --allow-net transpile.ts
      </code></pre>
      <p>Of course you can easily turn this into a <a href="https://docs.deno.com/runtime/reference/cli/task_runner/">Deno task</a>.</p>
      <p>If our <code>directory_client.ts</code> file contained other modules you can instead use the <code>bundle</code> function.  Here's an example of bundling our <code>directory_client.ts</code> saving the result as <code>htdocs/modules/directory_client.js</code>.</p>
      <pre><code class="language-typescript">/**
       * bundle.ts is an example of &quot;bundling&quot; the type script file directory_client.ts
       * into a module and writing it to htdocs/modules.
       */
      import { bundle } from &quot;jsr:@deno/emit&quot;;
      
      const js_path = path.join(&quot;htdocs&quot;, &quot;modules&quot;);
      const js_name = path.join(js_path, &quot;directory_client.js&quot;);
      const result = await bundle(&quot;./directory_client.ts&quot;);
      const { code } = result;
      await Deno.mkdir(js_path, { mode: 0o775, recursive: true });
      await Deno.writeTextFile(js_name, code);
      </code></pre>
      <p>You can run that with the following long command line.</p>
      <pre><code class="language-shell">deno run --allow-import --allow-env --allow-read --allow-write --allow-net bundle.ts
      </code></pre>
      <p>The bundle will contain the transpiled TypeScript from <code>directory_client.ts</code> but also any modules that <code>directory_client.ts</code> relied on. If you don't want to include the imported modules then you can set the value of <code>recursive</code> to false.</p>
      
    </article>
  </section>

    <script type="module" src="/modules/copyToClipboard.js"></script>
    <script type="module">
      await import('/pagefind/pagefind-highlight.js');
      new PagefindHighlight({ highlightParam: "highlight" });
    </script>
  <footer>
    <p>copyright Â© 2016 - 2025 R. S. Doiel<br /> <a
    href="/rssfeed.html">RSS</a> feeds and website built with <a
    href="https://rsdoiel.github.io/antennaApp">antennaApp</a>, Bash, Make and <a
    href="https://pandoc.org">Pandoc</a>.</p>
  </footer>
</body>
</html>
