<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="language" content="EN">
  <title>generating_rss_with_flatlake</title>

  <link rel="stylesheet" type="text/css"  href="/css/site.css" media="screen">
  <link title="RSS feed for rsdoiel's blog" rel="alternate" type="application/rss+xml" href="https://rsdoiel.github.io/rss.xml">
  <meta name="keywords" content="FlatLake, JSON API, RSS 2.0">
  <link rel="alternative" type="application/markdown" href="/blog/2025/08/10/generating_rss_with_flatlake.md">
  <link rel="search" type="application/opensearchdescription+xml"
        title="Robert's Rambling Search Engine"
        href="osd.xml">
</head>
<body>
<nav>
<ul>
<li><a href="/" title="R. S. Doiel"><img class="blog-logo" src="/media/Wee-Free-Doiels-Summer-Reading.svg" alt="Wee Free Doiels, Summer Reading"></a></li>
<li><a href="/about.html">About</a></li>
<li><a href="/blog/">Blog</a></li>
<li><a href="/presentations.html">Presentations</a></li>
<li><a href="/series/">Series</a></li>
<li><a href="/search.html">Search</a></li>
<li><a href="https://github.com/rsdoiel">GitHub</a></li>
<li><a href="/rss.xml" title="RSS Feed">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
<path d="M4 11a9 9 0 0 1 9 9"></path>
<path d="M4 4a16 16 0 0 1 16 16"></path>
<circle cx="5" cy="19" r="1"></circle> </svg> RSS </a></li>
</ul>
</nav>

<section>
  <article>
<h1 id="generating-rss-with-flatlake">Generating RSS with FlatLake</h1>
<p>By R. S. Doiel, 2025-08-10</p>
<p>One of the must have features missing from many static websites are
RSS feeds. Many people produce blogs using CommonMark/Markdown documents
with front matter. <a href="https://flatlake.app"
title="an open source tool from Cloud Cannon">FlatLake</a> produces a
JSON API from front matter. The API makes it easy to generate various
types of feeds. All that is needed is something to translate the JSON
API documents to the feed format you want. In this post I will show a
proof of concept using Deno+TypeScript to process the Flatlake generate
JSON API into an RSS feed.</p>
<h2><a name="requirements-for-your-site">Requirements for your site</a></h2>
<p>You need <a href="https://flatlake.app">FlateLake</a> installed. You
also need to have front matter in your CommonMark/Markdown documents. No
front matter, no API. I rely on front matter in my publication process
for blog so FlatLake is a good fit. I only use a mimum of features in
FlatLake. Here’s the configuration file I use.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">global</span><span class="kw">:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">outputs</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;list&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">collections</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">output_key</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;posts&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">page_size</span><span class="kw">:</span><span class="at"> </span><span class="dv">24</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">sort_key</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;datePublished&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">sort_direction</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;desc&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">list_elements</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;data&quot;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;content&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">inputs</span><span class="kw">:</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;./blog&quot;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">glob</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;**/*{md}&quot;</span></span></code></pre></div>
<h2><a name="generating-the-json-api">Generating the json api</a></h2>
<p>Once you have FlatLake configured generating the JSON API is as
simple as running the command</p>
<pre class="shell"><code>flatlake</code></pre>
<p>That’s it. It scans the directory named “blog” in the directory where
I stage my website. The output goes to a directory called “api”. If you
prefer a diffent path FlatLake has options to support that. See
<code>flatlake --help</code> or the website <a
href="https://flatlake.app/docs">FlatLake/docs</a>. The verbose and
logging options are helpful in understanding what FlatLake is doing.</p>
<h2><a name="short-anatomy-of-rss-xml">Short anatomy of RSS XML</a></h2>
<p>The RSS XML has two parts. A channel description and the items in the
feed. The items map the data about your blog posts. The channel
description isn’t directly available from the FlatLake generated data.
The easy solution I’ve chosen is to describe the channel in a YAML.
Here’s the example I use for my blog.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Robert&#39;s Ramblings&quot;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Robert&#39;s website and blog posts&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">link</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;https://rsdoiel.github.io&quot;</span></span></code></pre></div>
<h2><a name="json-api-to-rss">JSON API to RSS</a></h2>
<p>In my publication process the next thing I do is used a
Deno+TypeScript program to convert the JSON API into an RSS feed. I have
one feed for my site contains recent posts. The path in the api tree I
use it <code>api/posts/all/page-1.json</code>. Based on my configuration
file this contains the most recent 24 posts sorted by descending
publication date. At this point it’s just a matter of cross walking the
content of “page-1.json” into an RSS XML feed file.</p>
<p>Here’s a TypeScript module I knock together to test out the
concept.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * flatlakeToRSS2.ts translate a FlatLake JSON API document to RSS2 XML.</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"> *  </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"> *  Copyright (C) 2025  R. S. Doiel</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"> *  This program is free software: you can redistribute it and/or modify</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"> *  it under the terms of the GNU Affero General Public License as</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"> *  published by the Free Software Foundation, either version 3 of the</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"> *  License, or (at your option) any later version.</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"> *  This program is distributed in the hope that it will be useful,</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"> *  GNU Affero General Public License for more details.</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"> *  You should have received a copy of the GNU Affero General Public License</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"> *  along with this program.  If not, see </span><span class="kw">&lt;https:</span><span class="ot">//www.gnu.org/licenses</span><span class="kw">/&gt;</span><span class="co">.</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">// Define the structure of your input data</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> Post {</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  content<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  data<span class="op">:</span> {</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    abstract<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    author<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    dateCreated<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    dateModified<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    datePublished<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    keywords<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    pubDate<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    title<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    url<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co">// Define the structure of the RSS feed</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> RSSFeed {</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  title<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>  link<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>  language<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  copyright<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>  managingEditor<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>  webMaster<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>  items<span class="op">:</span> RSSItem[]<span class="op">;</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">interface</span> RSSItem {</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>  title<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>  link<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>  pubDate<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>  author<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>  categories<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="co">// Function to convert JSON data to RSS feed with YAML configuration</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">function</span> <span class="fu">convertToRSS</span>(</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>  posts<span class="op">:</span> Post[]<span class="op">,</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>  channelInfo<span class="op">:</span> <span class="bu">Partial</span><span class="op">&lt;</span>RSSFeed<span class="op">&gt;,</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>)<span class="op">:</span> RSSFeed {</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> feed<span class="op">:</span> RSSFeed <span class="op">=</span> {</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    title<span class="op">:</span> channelInfo<span class="op">.</span><span class="at">title</span> <span class="op">||</span> <span class="st">&quot;My Blog&quot;</span><span class="op">,</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    description<span class="op">:</span> channelInfo<span class="op">.</span><span class="at">description</span> <span class="op">||</span> <span class="st">&quot;A collection of blog posts&quot;</span><span class="op">,</span></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    link<span class="op">:</span> channelInfo<span class="op">.</span><span class="at">link</span> <span class="op">||</span> <span class="st">&quot;http://example.com&quot;</span><span class="op">,</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    language<span class="op">:</span> channelInfo<span class="op">.</span><span class="at">language</span><span class="op">,</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>    copyright<span class="op">:</span> channelInfo<span class="op">.</span><span class="at">copyright</span><span class="op">,</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>    managingEditor<span class="op">:</span> channelInfo<span class="op">.</span><span class="at">managingEditor</span><span class="op">,</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>    webMaster<span class="op">:</span> channelInfo<span class="op">.</span><span class="at">webMaster</span><span class="op">,</span></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    items<span class="op">:</span> []<span class="op">,</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>  posts<span class="op">.</span><span class="fu">forEach</span>((post) <span class="kw">=&gt;</span> {</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> item<span class="op">:</span> RSSItem <span class="op">=</span> {</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>      title<span class="op">:</span> post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">title</span><span class="op">,</span></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">abstract</span><span class="op">,</span></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>      link<span class="op">:</span> <span class="vs">`http://example.com/</span><span class="sc">${</span>post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">url</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>      pubDate<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>(</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>        post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">datePublished</span> <span class="op">||</span> post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">pubDate</span> <span class="op">||</span> post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">dateCreated</span> <span class="op">||</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>          post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">dateModified</span> <span class="op">||</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>      )<span class="op">.</span><span class="fu">toUTCString</span>()<span class="op">,</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>      author<span class="op">:</span> post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">author</span><span class="op">,</span></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>      categories<span class="op">:</span> post<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">keywords</span><span class="op">,</span></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>    feed<span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">push</span>(item)<span class="op">;</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> feed<span class="op">;</span></span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a><span class="co">// Function to generate the RSS XML</span></span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">function</span> <span class="fu">generateRSS</span>(feed<span class="op">:</span> RSSFeed)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> itemsXML <span class="op">=</span> feed<span class="op">.</span><span class="at">items</span></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>      (item) <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;item&gt;</span></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;title&gt;&lt;![CDATA[</span><span class="sc">${</span>item<span class="op">.</span><span class="at">title</span><span class="sc">}</span><span class="vs">]]&gt;&lt;/title&gt;</span></span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;description&gt;&lt;![CDATA[</span><span class="sc">${</span>item<span class="op">.</span><span class="at">description</span><span class="sc">}</span><span class="vs">]]&gt;&lt;/description&gt;</span></span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;link&gt;</span><span class="sc">${</span>item<span class="op">.</span><span class="at">link</span><span class="sc">}</span><span class="vs">&lt;/link&gt;</span></span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;pubDate&gt;</span><span class="sc">${</span>item<span class="op">.</span><span class="at">pubDate</span><span class="sc">}</span><span class="vs">&lt;/pubDate&gt;</span></span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;author&gt;</span><span class="sc">${</span>item<span class="op">.</span><span class="at">author</span><span class="sc">}</span><span class="vs">&lt;/author&gt;</span></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a><span class="vs">            </span><span class="sc">${</span></span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>        item<span class="op">.</span><span class="at">categories</span><span class="op">.</span><span class="fu">map</span>((category) <span class="kw">=&gt;</span> <span class="vs">`&lt;category&gt;</span><span class="sc">${</span>category<span class="sc">}</span><span class="vs">&lt;/category&gt;`</span>)</span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">join</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>      <span class="sc">}</span></span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;/item&gt;</span></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="op">,</span></span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="vs">`&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;rss version=&quot;2.0&quot;&gt;</span></span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;channel&gt;</span></span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;title&gt;&lt;![CDATA[</span><span class="sc">${</span>feed<span class="op">.</span><span class="at">title</span><span class="sc">}</span><span class="vs">]]&gt;&lt;/title&gt;</span></span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;description&gt;&lt;![CDATA[</span><span class="sc">${</span>feed<span class="op">.</span><span class="at">description</span><span class="sc">}</span><span class="vs">]]&gt;&lt;/description&gt;</span></span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;link&gt;</span><span class="sc">${</span>feed<span class="op">.</span><span class="at">link</span><span class="sc">}</span><span class="vs">&lt;/link&gt;</span></span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>feed<span class="op">.</span><span class="at">language</span> <span class="op">?</span> <span class="vs">`&lt;language&gt;</span><span class="sc">${</span>feed<span class="op">.</span><span class="at">language</span><span class="sc">}</span><span class="vs">&lt;/language&gt;`</span> <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="sc">}</span></span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>feed<span class="op">.</span><span class="at">copyright</span> <span class="op">?</span> <span class="vs">`&lt;copyright&gt;</span><span class="sc">${</span>feed<span class="op">.</span><span class="at">copyright</span><span class="sc">}</span><span class="vs">&lt;/copyright&gt;`</span> <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="sc">}</span></span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span></span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a>    feed<span class="op">.</span><span class="at">managingEditor</span></span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="vs">`&lt;managingEditor&gt;</span><span class="sc">${</span>feed<span class="op">.</span><span class="at">managingEditor</span><span class="sc">}</span><span class="vs">&lt;/managingEditor&gt;`</span></span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> <span class="st">&quot;&quot;</span></span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a>  <span class="sc">}</span></span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>feed<span class="op">.</span><span class="at">webMaster</span> <span class="op">?</span> <span class="vs">`&lt;webMaster&gt;</span><span class="sc">${</span>feed<span class="op">.</span><span class="at">webMaster</span><span class="sc">}</span><span class="vs">&lt;/webMaster&gt;`</span> <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="sc">}</span></span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>itemsXML<span class="sc">}</span></span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/channel&gt;</span></span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/rss&gt;`</span><span class="op">;</span></span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2><a name="putting-it-all-together">Putting it all together</a></h2>
<p>The demo program can be compiled with the follow.</p>
<pre class="shell"><code>git clone https://github.com/rsdoiel/flatlakeToRSS2
cd flatlakeToRSS2
deno task build</code></pre>
<p>The program in the <code>bin</code> directory can then be used to
generate the RSS XML from your FlatLake API. Copy it to some place in
your PATH.</p>
<p>Now I go to my website staging directory. I can take the following
steps to test RSS generation from FlatLake.</p>
<pre class="shell"><code>cd $HOME/Sites/rsdoiel.github.io
flatlake
edit rss_channel.yaml # Create the YAML file above
flatlakeToRSS2 rss_channel.yaml api/posts/all/page-1.json &gt;rss.xml</code></pre>
<h2><a name="lessons-learned">Lessons learned</a></h2>
<p>There are some very good feed libraries out there like <a
href="https://scripting.com">Dave Winer’s</a> <a
href="https://github.com/scripting/reallysimple">ReallySimple</a>. That
could save using format strings to render XML. It also has the advantage
that is can be use to read feeds as well.</p>
<p>Ideally I’d like the generation of RSS feeds to be in integrated into
my <a href="/BlogIt">BlogIt</a> tool I am working on.</p>
<p>This experiment showed that inspite of the limitted documentation of
the FlatLake website that it’s worth exploring as an off the shelf open
source solution. It might just earn a place along side <a
href="https://pagefind.app">PageFind</a> and <a
href="https://pandoc.org">Pandoc</a> as part of my regular web
toolkit.</p>
  </article>
</section>

<footer>
<p>copyright © 2016 - 2025 R. S. Doiel<br /> <a
href="/rssfeed.html">RSS</a> feeds and website built with <a
href="https://rsdoiel.github.io/pttk">pttk</a>, Bash, Make and <a
href="https://pandoc.org">Pandoc</a>.</p>
</footer>
<script type="module" src="/modules/copyToClipboard.js"></script>
<script type="module">
    await import('/pagefind/pagefind-highlight.js');
    new PagefindHighlight({ highlightParam: "highlight" });
</script>
</body>
</html>
