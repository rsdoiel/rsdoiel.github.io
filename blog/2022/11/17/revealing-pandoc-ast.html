<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8" >
  <meta name="generator" content="antenna/0.0.16-beta" >
  <meta name="date" content="2025-11-17T21:41:09-08:00" >
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" >
  <meta name="language" content="EN" >
  <title>R. S. Doiel, Software Engineer/Analyst &mdash; Robert's ramblings</title>
  <link type="text/markdown" title="R. S. Doiel, Software Engineer/Analyst &mdash; Robert's ramblings" href="revealing-pandoc-ast.md" rel="altenate" >
  <link type="text/css" href="/css/site.css" rel="stylesheet" >
  <link rel="alternate" title="Recent Blog Post" type="application/rss+xml" href="index.xml" >
  <link rel="alternate" title="Archive of Blog Posts" type="application/rss+xml" href="archive.xml" >
  <link rel="alternate" title="Markdown source for page" type="application/markdown" href="index.md" >
  <link rel="search" type="application/opensearchdescription+xml" title="Robert's Rambling Search Engine" href="osd.xml" >
  <script type="module" src="/modules/copyToClipboard.js" ></script>
</head>
<body>
  <nav>
    <ul>
    <li><a href="/" title="R. S. Doiel"><img class="blog-logo" src="/media/Wee-Free-Doiels-Summer-Reading.svg" alt="Wee Free Doiels, Summer Reading"></a></li>
    <li><a href="/">R. S. Doiel</a></li>
    <li><a href="/about.html">About</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/presentations.html">Presentations</a></li>
    <li><a href="/series/">Series</a></li>
    <li><a href="/search.html">Search</a></li>
    <li><a href="https://github.com/rsdoiel">GitHub</a></li>
    <li><a href="/rss.xml" title="RSS Feed">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9"></path>
    <path d="M4 4a16 16 0 0 1 16 16"></path>
    <circle cx="5" cy="19" r="1"></circle> </svg> RSS </a></li>
    </ul>
  </nav>

  <section>
    <article data-published="2022-11-17" data-link="https://rsdoiel.github.io/blog/2022/11/17/revealing-pandoc-ast.html">
      <h1>Revealing the Pandoc AST</h1>
      <p>I've used Pandoc for a number of years, probably a decade. It's been wonderful
      watching it grow in capability. When Pandoc started accepting JSON documents as
      a support metadata file things really started to click for me. Pandoc became
      my go to tool for rendering content in my writing and documentation projects.</p>
      <p>Recently I've decided I want a little bit more from Pandoc. I've become curious
      about prototyping some document conversion via Pandoc's filter mechanism. To do
      that you need to understand the AST, aka abstract syntax tree.
      How is the AST structure?</p>
      <p>It turns out I just wasn't thinking simply enough (or maybe just not paying
      enough attention while I skimmed Pandoc's documentation). Pandoc's processing
      model looks like</p>
      <pre><code>	INPUT --reader--&gt; AST --filter AST --writer--&gt; OUTPUT
      </code></pre>
      <p>I've &quot;known&quot; this forever. The missing piece for me was understanding
      the AST can be an output format.  Use the <code>--to</code> option with the value
      &quot;native&quot; you get the Haskell representation of the AST. It's that simple.</p>
      <pre><code>	pandoc --from=markdown --to=native \
      	   learning-to-write-a-pandoc-filter.md | \
      	   head -n 20
      </code></pre>
      <p>Output</p>
      <pre><code>[ Header
          1
          ( &quot;learning-to-write-a-pandoc-filter&quot; , [] , [] )
          [ Str &quot;Learning&quot;
          , Space
          , Str &quot;to&quot;
          , Space
          , Str &quot;write&quot;
          , Space
          , Str &quot;a&quot;
          , Space
          , Str &quot;Pandoc&quot;
          , Space
          , Str &quot;filter&quot;
          ]
      , Para
          [ Str &quot;I\8217ve&quot;
          , Space
          , Str &quot;used&quot;
          , Space
      </code></pre>
      <p>If you prefer JSON over Haskell use <code>--to=json</code> for similar effect. Here's
      an example piping through <a href="https://stedolan.github.io/jq/">jq</a>.</p>
      <pre><code>	pandoc --from=markdown --to=json \
      	   learning-to-write-a-pandoc-filter.md | jq .
      </code></pre>
      <p>Writing filters makes much sense to me now. I can see the AST and see
      how the documentation describes writing hooks in Lua to process it.</p>
      
    </article>
  </section>
  <footer>
    <footer>
    <p>copyright Â© 2016 - 2025 R. S. Doiel<br /> <a
    href="/rssfeed.html">RSS</a> feeds and website built with <a
    href="https://rsdoiel.github.io/antennaApp">antennaApp</a>.
    </footer>
    <script type="module">
      await import('/pagefind/pagefind-highlight.js');
      new PagefindHighlight({ highlightParam: "highlight" });
    </script>
  </footer>
</body>
</html>
