<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <link  rel="alternate" type="text/markdown" href="OPML-to-Markdown-and-back.md" title=""/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/site.css" />
  <meta name="generator" content="antenna/0.0.7">
  <meta name="date" content="2025-09-22T16:33:24-07:00">
</head>
<body>
  <header>
    (date: 2025-09-22 16:33:24)
  </header>
  <nav>
    <ul>
    <li><a href="/" title="R. S. Doiel"><img class="blog-logo" src="/media/Wee-Free-Doiels-Summer-Reading.svg" alt="Wee Free Doiels, Summer Reading"></a></li>
    <li><a href="/">R. S. Doiel</a></li>
    <li><a href="/about.html">About</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/presentations.html">Presentations</a></li>
    <li><a href="/series/">Series</a></li>
    <li><a href="/search.html">Search</a></li>
    <li><a href="https://github.com/rsdoiel">GitHub</a></li>
    <li><a href="/index.xml" title="RSS, recent posts">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9"></path>
    <path d="M4 4a16 16 0 0 1 16 16"></path>
    <circle cx="5" cy="19" r="1"></circle> </svg> RSS </a></li>
    </ul>
  </nav>

  <section>
    <article data-published="2016-05-28" data-link="https://rsdoiel.github.io/blog/2016/05/28/OPML-to-Markdown-and-back.html">
      <h1 id="opml-to-markdown-and-back">OPML to Markdown and back</h1>
      <p>By R. S. Doiel 2016-05-28</p>
      <h2 id="overview">Overview</h2>
      <p>I wrote a Go language package to sort <a href="http://dev.opml.org/spec2.html">OPML</a> outlines.<br />
      I wrote this because my preferred <a href="http://goread.io">feed reader </a> supports manual<br />
      sorting but not automatic alpha sorting by the <em>outline</em> element's <em>text</em> attribute.</p>
      <h2 id="observations">Observations</h2>
      <p>Out of the box the OPML 2 Spec provides attributes indicating inclusion of other OPML files,<br />
      scripts, basic metadata (create, modified, authorship), and even directory structures.</p>
      <p><a href="http://fargo.io">Fargo</a> allows user defined attributes to be applied to the <em>outline</em><br />
      element in OPML. This could be used in support some of the<br />
      <a href="https://www.literatureandlatte.com/scrivener.php">Scrivener</a><br />
      features I miss such as describing how to render a project to various formats such as<br />
      rtf, pdf, ePub, web pages or even <a href="https://www.finaldraft.com/">Final Draft fdx</a> files.</p>
      <p>I write allot of Markdown formatted text.  Markdown is simple to index,<br />
      search and convert into useful formats. Markdown is not good at expressing more<br />
      complex structures such as metadata. Website generators that use markdown often<br />
      require a preamble or <em>front matter</em> in the markdown to provide any metadata. This<br />
      leaves your document head cluttered and less human readable.</p>
      <p>Another approach is to include a parallel document with the metadata.  It occurred to me<br />
      that an OPML file could easily hold that metadata. It can even hold Markdown content.<br />
      The trouble with OPML is that it is not quick to edit by hand.</p>
      <pre><code>Is there a round trip semantic mapping between OPML and Markdown?
      </code></pre>
      <h2 id="germination-of-an-idea">Germination of an idea</h2>
      <p>Entering a web link in Fargo the link is URL encoded and saved in the <em>text</em> attribute of the<br />
      <em>outline</em> element.</p>
      <p>The source view of a web links in Fargo's <em>outline</em> element looks like</p>
      <pre><code class="language-OPML">    &lt;outline text=&quot;&amp;gt; href=&amp;quot;http://example.org&amp;quot;&amp;lt;My example.org&amp;gt;/a&amp;lt;&quot; /&gt;
      </code></pre>
      <p>That <em>outline</em> element might render in Markdown as</p>
      <pre><code>    + [My element.org](http://example.org)
      </code></pre>
      <p>The steps to create the Markdown view are simple</p>
      <ol>
      <li>URL decode the <em>text</em> attribute</li>
      <li>Convert HTML to Markdown</li>
      </ol>
      <p>Making a round trip could be done by</p>
      <ol start="3">
      <li>Convert Markdown into HTML</li>
      <li>For each <em>li</em> element covert to an <em>outline</em> element URL encoding the inner HTML of the <em>li</em></li>
      </ol>
      <p>So far so good. What about something more complex?</p>
      <p>Here's an <em>outline</em> element example from <a href="http://hosting.opml.org/dave/spec/directory.opml">http://hosting.opml.org/dave/spec/directory.opml</a></p>
      <pre><code class="language-OPML">    &lt;outline text=&quot;Scripting News sites&quot; created=&quot;Sun, 16 Oct 2005 05:56:10 GMT&quot; type=&quot;link&quot; url=&quot;http://hosting.opml.org/dave/mySites.opml&quot;/&gt;
      </code></pre>
      <p>To me that should look like</p>
      <pre><code>    + [Scripting News Sites](http://hosting.opml.org/dave/mySites.opml)
      </code></pre>
      <p>What about the <em>created</em> attribute? Could we render this case as an additional set of anchors using data uri?</p>
      <p>This suggest a rule like</p>
      <ul>
      <li>if the <em>text</em> attribute contains HTML markup
      <ul>
      <li>URL decode into HTML</li>
      <li>Convert HTML to Markdown</li>
      </ul>
      </li>
      <li>else render attributes as additional anchors using data URI</li>
      </ul>
      <p>This might work as follows.</p>
      <pre><code class="language-OPML">    &lt;outline text=&quot;Scripting News sites&quot; 
              created=&quot;Sun, 16 Oct 2005 05:56:10 GMT&quot; 
              type=&quot;link&quot; 
              url=&quot;http://hosting.opml.org/dave/mySites.opml&quot;/&gt;
      </code></pre>
      <p>Would become</p>
      <pre><code class="language-Markdown">    + [Scripting News Sites](http://hosting.opml.org/dave/mySites.opml) [type](data:text/plain;link) [created](data:text/date;Sun, 16 Oct 2005 05:56:10 GMT)
      </code></pre>
      <p>In HTML this would look like</p>
      <pre><code class="language-HTML">    &lt;li&gt;&lt;a href=&quot;http://histing.opml.org/dave/mySites.opml&quot;&gt;Scripting News Sites&lt;/a&gt;
              &lt;a href=&quot;data:text/plain;link&quot;&gt;type&lt;/a&gt;
              &lt;a href=&quot;data:text/date;Sun, 16 Oct 2005 05:56:10 GMT&quot;&gt;created&lt;/a&gt;&lt;/li&gt;
      </code></pre>
      <h3 id="markdown-to-opml">Markdown to OPML</h3>
      <p>Coming back to OPML from Markdown then becomes</p>
      <ul>
      <li>Convert Markdown to HTML</li>
      <li>For each <em>li</em> element inspect anchors,
      <ul>
      <li>if anchors contain data URI then map <em>outline</em> element</li>
      <li>else URL encode and embed in <em>outline</em> <em>text</em> attribute</li>
      </ul>
      </li>
      </ul>
      <p>Is this viable? Does it have any advantages?</p>
      
    </article>
  </section>
  <footer>
    <p>copyright Â© 2016 - 2025 R. S. Doiel<br /> <a
    href="/rssfeed.html">RSS</a> feeds and website built with <a
    href="https://rsdoiel.github.io/antennaApp">antennaApp</a>, Bash, Make and <a
    href="https://pandoc.org">Pandoc</a>.</p>
  </footer>

    <script type="module" src="/modules/copyToClipboard.js"></script>
    <script type="module">
      await import('/pagefind/pagefind-highlight.js');
      new PagefindHighlight({ highlightParam: "highlight" });
    </script>
</body>
</html>
